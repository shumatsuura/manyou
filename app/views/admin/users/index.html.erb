<div class ="container">
  <table class="table">
    <tr>
      <th>ユーザー名</th>
      <th>Email</th>
      <th>タスク数</th>
      <th>admin権限</th>
      <th>作成日時</th>
      <th>更新日時</th>
    </tr>

    <% @users.each do |user| %>
      <tr>
        <td class="user_name_row"><%= link_to "#{user.name}", admin_user_path(user.id) %></td>
        <td class="user_email_row"><%= user.email %></td>
        <td class="user_tasks_count_row">
          <% if user.tasks %>
            <%= user.tasks.count %>
          <% end %>
        </td>
        <td class="user_admin_row"><%= link_to "#{user.admin}", admin_user_path(user.id, params: {user: { admin: user.toggle(:admin).admin}}), method: :put,data: {confirm: '変更していいですか？'} %></td>
        <td class="user_created_at_row"><%= user.created_at.strftime("%Y年%m月%d日 %H:%M") %></td>
        <td class="user_updated_at_row"><%= user.updated_at.strftime("%Y年%m月%d日 %H:%M") %></td>
        <td class="user_edit_row"><%= link_to t('view.edit'), edit_admin_user_path(user.id) %></td>
        <td><%= link_to t('view.delete'), admin_user_path(user.id), method: :delete ,data: {confirm: '本当に削除していいですか？'} %></td>
      </tr>
    <% end %>

  </table>
  <%= paginate @users %>
</div>
